(this.webpackJsonpsmokerpi=this.webpackJsonpsmokerpi||[]).push([[0],{260:function(e,t,a){e.exports=a(494)},307:function(e,t){},310:function(e,t,a){},316:function(e,t,a){},494:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(18),o=a.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(37),c=a(38),s=a(211),u=a(212),m=a.n(u),p=a(20),h=a(134);var E=Object(c.c)({smokerpi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{graphData:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATA_SUCCESS":return Object(p.a)({},e,{},t.data);case"SOCKET_MESSAGE_RECEIVED":return Object(p.a)({},e,{},t.payload);default:return e}}}),d=a(213),g=a.n(d);a(310);var f=a(83),v=a(11),y=a(500),b=a(506),C=a(507),S=a(89),_=a(505),k=a(135);function O(e){return r.a.createElement(y.a,null,r.a.createElement(b.a,{collapseOnSelect:!0,bg:"dark",variant:"dark",expand:"lg",fixed:"top"},r.a.createElement(b.a.Brand,null,e.appTitle),r.a.createElement(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(b.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(C.a,{className:"mr-auto"},r.a.createElement(k.LinkContainer,{to:"/"},r.a.createElement(S.a,{as:C.a.Link},"Home")),r.a.createElement(k.LinkContainer,{to:"/config"},r.a.createElement(S.a,{as:C.a.Link},"Config"))),r.a.createElement(C.a,null,r.a.createElement(_.a,{title:"Help",id:"basic-nav-dropdown"},r.a.createElement(_.a.Item,{href:"https://github.com/Phazeshift/smokerpi"},"About"))))))}var w=a(92),N=a(93),A=a(96),j=a(97),x=(a(315),a(316),a(501)),B=a(508),T=a(502),D=a(228),G=a(503),M=a(218),K=a(23),P=function(e){Object(j.a)(a,e);var t=Object(A.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"componentDidMount",value:function(){this.props.getState(),this.props.getAllGraph()}},{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement(x.a,null,r.a.createElement(B.a,{bg:"light"},r.a.createElement(B.a.Body,{className:"d-flex justify-content-center"},r.a.createElement("h1",null,this.props.smokerpi.temperature,"\xb0C")),r.a.createElement(B.a.Footer,{className:"text-muted"},r.a.createElement("small",null,"Blower: ",this.props.smokerpi.blower," Pid: ",this.props.smokerpi.pid?"On":"Off"," Target: ",this.props.smokerpi.targetTemperature)))),r.a.createElement(x.a,null,r.a.createElement(B.a,null,r.a.createElement(B.a.Body,null,r.a.createElement(T.a,null,r.a.createElement(D.a,{className:"d-flex justify-content-center"},r.a.createElement(G.a,null,r.a.createElement(M.a,{variant:"light",className:"ml-1",onClick:this.props.toggleBlower},"Toggle Blower"),r.a.createElement(M.a,{variant:"light",className:"ml-1",onClick:this.props.toggleAutomatic},"Toggle Pid"),r.a.createElement(M.a,{variant:"light",className:"ml-1",onClick:this.props.getAllGraph},"Update Graph"))))))),r.a.createElement(x.a,null,r.a.createElement(B.a,null,r.a.createElement(B.a.Body,null,r.a.createElement("div",{style:{paddingBottom:"56.25%",position:"relative",height:0}},r.a.createElement("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}},r.a.createElement(K.e,null,r.a.createElement(K.d,{data:this.props.smokerpi.graphData,margin:{top:5,right:20,left:10,bottom:5}},r.a.createElement(K.g,{dataKey:"x"}),r.a.createElement(K.f,null),r.a.createElement(K.b,null),r.a.createElement(K.a,{stroke:"#f5f5f5"}),r.a.createElement(K.c,{type:"monotone",dataKey:"t",stroke:"#ff7300",dot:!1,yAxisId:0}),r.a.createElement(K.c,{type:"monotone",dataKey:"b",stroke:"#82ca9d",dot:!1,yAxisId:1}),r.a.createElement(K.c,{type:"monotone",dataKey:"s",stroke:"#8884d8",dot:!1,yAxisId:0})))))))))}}]),a}(n.Component),W=Object(i.connect)((function(e){return Object(p.a)({},e)}),(function(e){return{getTime:function(){return e((function(e){return fetch("/api/time").then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(t){h.toastr.removeByType("error"),e({type:"LOAD_DATA_SUCCESS",data:t})}),(function(e){h.toastr.error("Error loading data: ".concat(e.message))}))}))},getState:function(){return e((function(e){e({type:"SEND_WEBSOCKET_MESSAGE",method:"getState",payload:{}})}))},getAllGraph:function(){return e((function(e){e({type:"SEND_WEBSOCKET_MESSAGE",method:"getAllGraph",payload:{}})}))},toggleBlower:function(){return e((function(e){e({type:"SEND_WEBSOCKET_MESSAGE",method:"toggleBlower",payload:{}})}))},toggleAutomatic:function(){return e((function(e){e({type:"SEND_WEBSOCKET_MESSAGE",method:"toggleAutomatic",payload:{}})}))}}}))(P),q=a(504),I=a(231),L=function(e){var t=e.name,a=e.type,n=e.placeholder,l=e.onChange,o=e.className,i=e.value,c=e.error,s=(e.children,e.label);Object(I.a)(e,["name","type","placeholder","onChange","className","value","error","children","label"]);return r.a.createElement(q.a.Group,null,r.a.createElement(q.a.Label,{htmlFor:t},s),r.a.createElement(q.a.Control,{id:t,name:t,type:a,placeholder:n,onChange:l,value:i,className:o,style:c&&{border:"solid 1px red"}}),c&&r.a.createElement("p",null,c))};L.defaultProps={type:"text",className:""};var R,J=function(e){Object(j.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={errors:{},submitted:!1},e.handleChange=function(t){var a=e.state.config;a[t.target.name]=t.target.value,e.setState({config:a})},e.onSubmit=function(){var t={};e.state.config.set_temperature||(t.set_temperature="Enter value"),e.setState({errors:t},(function(){0===Object.getOwnPropertyNames(e.state.errors).length&&(e.setState({submitted:!0}),e.props.updateConfig(e.state.config))}))},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){this.setState({config:Object(p.a)({},this.props)}),this.props.getConfig()}},{key:"componentWillReceiveProps",value:function(e){this.setState({config:Object(p.a)({},e)})}},{key:"render",value:function(){var e=JSON.stringify(this.state);if(!this.state.config||!this.state.config.set_temperature)return r.a.createElement("div",null,e);var t=this.state,a=(t.submitted,t.errors);return r.a.createElement(y.a,null,r.a.createElement("h2",null,"Config"),r.a.createElement("div",null,e),r.a.createElement(q.a,null,r.a.createElement(L,{label:"Target temperature",name:"set_temperature",type:"text",value:this.state.config.set_temperature,onChange:this.handleChange,placeholder:"Enter value...",error:a.set_temperature,required:!0,className:"input"}),r.a.createElement(L,{label:"Blower minimum",name:"blower_minimum",type:"text",value:this.state.config.blower_minimum,onChange:this.handleChange,placeholder:"Enter value...",error:a.blower_minimum,required:!0,className:"input"}),r.a.createElement(L,{label:"Push interval",name:"push_interval",type:"text",value:this.state.config.push_interval,onChange:this.handleChange,placeholder:"Enter value...",error:a.push_interval,required:!0,className:"input"}),r.a.createElement(L,{label:"Graph interval",name:"graph_interval",type:"text",value:this.state.config.graph_interval,onChange:this.handleChange,placeholder:"Enter value...",error:a.graph_interval,required:!0,className:"input"}),r.a.createElement(L,{label:"Max CS Pin",name:"cs_pin",type:"text",value:this.state.config.cs_pin,onChange:this.handleChange,placeholder:"Enter value...",error:a.cs_pin,required:!0,className:"input"}),r.a.createElement(L,{label:"Max Clock Pin",name:"clock_pin",type:"text",value:this.state.config.clock_pin,onChange:this.handleChange,placeholder:"Enter value...",error:a.clock_pin,required:!0,className:"input"}),r.a.createElement(L,{label:"Max Data Pin",name:"data_pin",type:"text",value:this.state.config.data_pin,onChange:this.handleChange,placeholder:"Enter value...",error:a.data_pin,required:!0,className:"input"}),r.a.createElement(L,{label:"Blower pin 1",name:"blower_pin1",type:"text",value:this.state.config.blower_pin1,onChange:this.handleChange,placeholder:"Enter value...",error:a.blower_pin1,required:!0,className:"input"}),r.a.createElement(L,{label:"Blower pin 2",name:"blower_pin2",type:"text",value:this.state.config.blower_pin2,onChange:this.handleChange,placeholder:"Enter value...",error:a.blower_pin2,required:!0,className:"input"})),r.a.createElement(T.a,null,r.a.createElement(M.a,{onClick:this.onSubmit},"Save")))}}]),a}(n.Component),U=Object(i.connect)((function(e){return Object(p.a)({},e.smokerpi.config)}),(function(e){return{getConfig:function(){return e((function(e){e({type:"SEND_WEBSOCKET_MESSAGE",method:"getConfig",payload:{}})}))},updateConfig:function(t){return e(function(e){return function(t){t({type:"SEND_WEBSOCKET_MESSAGE",method:"updateConfig",payload:Object(p.a)({},e)})}}(t))}}}))(J);function F(){return r.a.createElement(f.BrowserRouter,null,r.a.createElement(O,{appTitle:"SmokerPi"}),r.a.createElement("div",null,r.a.createElement(v.g,null,r.a.createElement(v.d,{path:"/config"},r.a.createElement(U,null)),r.a.createElement(v.d,{path:"/"},r.a.createElement(W,null)))))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.Provider,{store:(R=window.location.href,Object(c.d)(E,Object(c.a)(s.a,m.a,function(e){return function(t){var a=g.a.connect(e);return console.dir(a),a.on("message",(function(e){console.log(e),t.dispatch({type:"SOCKET_MESSAGE_RECEIVED",payload:e})})),function(e){return function(t){return"SEND_WEBSOCKET_MESSAGE"===t.type?(console.log(t),void a.emit(t.method,t.payload)):e(t)}}}}(R))))},r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[260,1,2]]]);
//# sourceMappingURL=main.be3e75f4.chunk.js.map