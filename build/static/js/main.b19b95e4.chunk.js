(this.webpackJsonpsmokerpi=this.webpackJsonpsmokerpi||[]).push([[0],{100:function(e,t,a){},235:function(e,t,a){e.exports=a(435)},252:function(e,t,a){},435:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(19),o=a.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(17),c=a(42),u=a(186),s=a(187),m=a.n(s),p=a(21),h=a(204),d=a(67),g=function(){return function(e,t){var a=t().smokerpi.graphIndex;return E(e,"/api/graph?from=".concat(a),"LOAD_GRAPH_DATA_SUCCESS")}},f=function(){return function(e){return E(e,"/api/config","LOAD_CONFIG_DATA_SUCCESS")}},v=function(){return function(e){return E(e,"/api/state","LOAD_STATE_DATA_SUCCESS")}},E=function(e,t,a){return fetch(t).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(t){d.toastr.removeByType("error"),e({type:a,data:t})}),(function(e){d.toastr.error("Error calling api: ".concat(e.message))}))},b=function(e,t,a,n){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(t){d.toastr.removeByType("error"),n(e,t)}),(function(e){d.toastr.error("Error calling api: ".concat(e.message))}))};var C=Object(c.c)({smokerpi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{graphData:[],graphIndex:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_GRAPH_DATA_SUCCESS":var a=Object(h.a)(e.graphData),n=(a=a.concat(t.data)).reduce((function(e,t){return t.i>e?t.i:e}),0)+1;return Object(p.a)({},e,{graphIndex:n,graphData:a});case"LOAD_CONFIG_DATA_SUCCESS":return Object(p.a)({},e,{config:t.data});case"LOAD_STATE_DATA_SUCCESS":return Object(p.a)({},e,{state:t.data});case"SOCKET_MESSAGE_RECEIVED":return Object(p.a)({},e,{},t.payload);default:return e}}});a(252);var y=a(83),_=a(11),O=a(441),k=a(447),j=a(448),S=a(89),w=a(446),x=a(125);function D(e){return r.a.createElement(O.a,null,r.a.createElement(k.a,{collapseOnSelect:!0,bg:"dark",variant:"dark",expand:"lg",fixed:"top"},r.a.createElement(k.a.Brand,null,e.appTitle),r.a.createElement(k.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(k.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(j.a,{className:"mr-auto"},r.a.createElement(x.LinkContainer,{to:"/"},r.a.createElement(S.a,{as:j.a.Link},"Home")),r.a.createElement(x.LinkContainer,{to:"/config"},r.a.createElement(S.a,{as:j.a.Link},"Config"))),r.a.createElement(j.a,null,r.a.createElement(w.a,{title:"Help",id:"basic-nav-dropdown"},r.a.createElement(w.a.Item,{href:"https://github.com/Phazeshift/smokerpi"},"About"))))))}var A=a(25),N=a(26),T=a(27),B=a(28),I=(a(99),a(100),a(444)),P=a(449),G=function(e){return e.smokerpi.graphData},q=a(22),L=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={timer:null},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getGraphData();var t=setInterval((function(){return e.props.getGraphData()}),3e4);this.setState({timer:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"render",value:function(){return r.a.createElement("div",{style:{paddingBottom:"56.25%",position:"relative",height:0}},r.a.createElement("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}},r.a.createElement(q.e,null,r.a.createElement(q.d,{data:this.props.graphData,margin:{top:5,right:20,left:10,bottom:5}},r.a.createElement(q.g,{dataKey:"x"}),r.a.createElement(q.f,null),r.a.createElement(q.b,null),r.a.createElement(q.a,{stroke:"#f5f5f5"}),r.a.createElement(q.c,{type:"monotone",dataKey:"t",stroke:"#ff6666",dot:!1,yAxisId:0}),r.a.createElement(q.c,{type:"monotone",dataKey:"b",stroke:"#82ca9d",dot:!1,yAxisId:1}),r.a.createElement(q.c,{type:"monotone",dataKey:"d",stroke:"#80b3ff",dot:!1,yAxisId:1}),r.a.createElement(q.c,{type:"monotone",dataKey:"s",stroke:"#c7c5ed",dot:!1,yAxisId:0})))))}}]),a}(n.Component),U=Object(i.connect)((function(e){return{graphData:G(e)}}),(function(e){return{getGraphData:function(){return e(g())}}}))(L),M=a(442),K=a(202),R=a(443),W=a(192),F=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){return Object(A.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(M.a,null,r.a.createElement(K.a,{className:"d-flex justify-content-center"},r.a.createElement(R.a,null,r.a.createElement(W.a,{variant:"light",className:"ml-1",onClick:this.props.toggleBlower},"Toggle Blower"),r.a.createElement(W.a,{variant:"light",className:"ml-1",onClick:this.props.toggleDamper},"Toggle Damper"),r.a.createElement(W.a,{variant:"light",className:"ml-1",onClick:this.props.toggleAutomatic},"Toggle Pid"),r.a.createElement(W.a,{variant:"light",className:"ml-1",onClick:function(){return e.props.getGraphData()}},"Update Graph"))))}}]),a}(n.Component),H={toggleAutomatic:function(){return function(e,t){var a=t().smokerpi.state.pid;return b(e,"/api/pid",{enabled:!a},(function(){return e(v())}))}},toggleBlower:function(){return function(e,t){var a=t().smokerpi.state.blower;return b(e,"/api/blower",{enabled:100!==a},(function(){return e(v())}))}},toggleDamper:function(){return function(e,t){var a=t().smokerpi.state.damper;return b(e,"/api/damper",{enabled:100!==a},(function(){return e(v())}))}},getGraphData:g},J=Object(i.connect)(null,H)(F),z=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={timer:null},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getCurrentState();var t=setInterval((function(){return e.props.getCurrentState()}),3e4);this.setState({timer:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"render",value:function(){return r.a.createElement(P.a,{bg:"light"},r.a.createElement(P.a.Body,{className:"d-flex justify-content-center"},r.a.createElement("h1",null,this.props.temperature,"\xb0C")),r.a.createElement(P.a.Footer,{className:"text-muted"},r.a.createElement("small",null,"Blower: ",this.props.blower," Damper: ",this.props.damper," Pid: ",this.props.pid?"On":"Off"," Target: ",this.props.targetTemperature)))}}]),a}(n.Component),V=Object(i.connect)((function(e){return Object(p.a)({},e.smokerpi.state)}),(function(e){return{getCurrentState:function(){return e(v())}}}))(z),$=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){return Object(A.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement(I.a,null,r.a.createElement(V,null)),r.a.createElement(I.a,null,r.a.createElement(P.a,null,r.a.createElement(P.a.Body,null,r.a.createElement(J,null)))),r.a.createElement(I.a,null,r.a.createElement(P.a,null,r.a.createElement(P.a.Body,null,r.a.createElement(U,null)))))}}]),a}(n.Component),Q=Object(i.connect)((function(e){return{}}),(function(e){return{}}))($),X=a(445),Y=a(206),Z=function(e){var t=e.name,a=e.type,n=e.placeholder,l=e.onChange,o=e.className,i=e.value,c=e.error,u=(e.children,e.label);Object(Y.a)(e,["name","type","placeholder","onChange","className","value","error","children","label"]);return r.a.createElement(X.a.Group,null,r.a.createElement(X.a.Label,{htmlFor:t},u),r.a.createElement(X.a.Control,{id:t,name:t,type:a,placeholder:n,onChange:l,value:i,className:o,style:c&&{border:"solid 1px red"}}),c&&r.a.createElement("p",null,c))};Z.defaultProps={type:"text",className:""};var ee=function(e){Object(B.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={errors:{},submitted:!1},e.handleChange=function(t){var a=e.state.config;a[t.target.name]=t.target.value,e.setState({config:a})},e.onSubmit=function(){var t={};e.state.config.set_temperature||(t.set_temperature="Enter value"),e.setState({errors:t},(function(){0===Object.getOwnPropertyNames(e.state.errors).length&&(e.setState({submitted:!0}),e.props.updateConfig(e.state.config))}))},e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){this.setState({config:Object(p.a)({},this.props)}),this.props.getConfig()}},{key:"componentWillReceiveProps",value:function(e){this.setState({config:Object(p.a)({},e)})}},{key:"render",value:function(){var e=JSON.stringify(this.state);if(!this.state.config||!this.state.config.set_temperature)return r.a.createElement("div",null,e);var t=this.state.errors;return r.a.createElement(O.a,null,r.a.createElement("h2",null,"Config"),r.a.createElement("div",null,e),r.a.createElement(X.a,null,r.a.createElement(Z,{label:"Target temperature",name:"set_temperature",type:"text",value:this.state.config.set_temperature,onChange:this.handleChange,placeholder:"Enter value...",error:t.set_temperature,required:!0,className:"input"}),r.a.createElement(Z,{label:"Blower minimum",name:"blower_minimum",type:"text",value:this.state.config.blower_minimum,onChange:this.handleChange,placeholder:"Enter value...",error:t.blower_minimum,required:!0,className:"input"}),r.a.createElement(Z,{label:"Push interval",name:"push_interval",type:"text",value:this.state.config.push_interval,onChange:this.handleChange,placeholder:"Enter value...",error:t.push_interval,required:!0,className:"input"}),r.a.createElement(Z,{label:"Graph interval",name:"graph_interval",type:"text",value:this.state.config.graph_interval,onChange:this.handleChange,placeholder:"Enter value...",error:t.graph_interval,required:!0,className:"input"}),r.a.createElement(Z,{label:"Max CS Pin",name:"cs_pin",type:"text",value:this.state.config.cs_pin,onChange:this.handleChange,placeholder:"Enter value...",error:t.cs_pin,required:!0,className:"input"}),r.a.createElement(Z,{label:"Max Clock Pin",name:"clock_pin",type:"text",value:this.state.config.clock_pin,onChange:this.handleChange,placeholder:"Enter value...",error:t.clock_pin,required:!0,className:"input"}),r.a.createElement(Z,{label:"Max Data Pin",name:"data_pin",type:"text",value:this.state.config.data_pin,onChange:this.handleChange,placeholder:"Enter value...",error:t.data_pin,required:!0,className:"input"}),r.a.createElement(Z,{label:"Blower pin 1",name:"blower_pin1",type:"text",value:this.state.config.blower_pin1,onChange:this.handleChange,placeholder:"Enter value...",error:t.blower_pin1,required:!0,className:"input"}),r.a.createElement(Z,{label:"Blower pin 2",name:"blower_pin2",type:"text",value:this.state.config.blower_pin2,onChange:this.handleChange,placeholder:"Enter value...",error:t.blower_pin2,required:!0,className:"input"}),r.a.createElement(Z,{label:"Damper pin",name:"damper_pin",type:"text",value:this.state.config.damper_pin,onChange:this.handleChange,placeholder:"Enter value...",error:t.damper_pin,required:!0,className:"input"}),r.a.createElement(Z,{label:"Damper min",name:"damper_minimum",type:"text",value:this.state.config.damper_minimum,onChange:this.handleChange,placeholder:"Enter value...",error:t.damper_minimum,required:!0,className:"input"}),r.a.createElement(Z,{label:"Damper max",name:"damper_maximum",type:"text",value:this.state.config.damper_maximum,onChange:this.handleChange,placeholder:"Enter value...",error:t.damper_maximum,required:!0,className:"input"})),r.a.createElement(M.a,null,r.a.createElement(W.a,{onClick:this.onSubmit},"Save")))}}]),a}(n.Component),te=Object(i.connect)((function(e){return Object(p.a)({},e.smokerpi.config)}),(function(e){return{getConfig:function(){return e(f())},updateConfig:function(t){return e(function(e){return function(t){return b(t,"/api/config",e,(function(){return t(f())}))}}(t))}}}))(ee);function ae(){return r.a.createElement(y.BrowserRouter,null,r.a.createElement(D,{appTitle:"SmokerPi"}),r.a.createElement("div",null,r.a.createElement(_.g,null,r.a.createElement(_.d,{path:"/config"},r.a.createElement(te,null)),r.a.createElement(_.d,{path:"/"},r.a.createElement(Q,null)))))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.Provider,{store:Object(c.d)(C,Object(c.a)(u.a,m.a))},r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[235,1,2]]]);
//# sourceMappingURL=main.b19b95e4.chunk.js.map